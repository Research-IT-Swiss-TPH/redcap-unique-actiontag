"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var STPH_UniqueAT=STPH_UniqueAT||{};STPH_UniqueAT.log=function(){if(STPH_UniqueAT.params.debug)switch(arguments.length){case 1:return void console.log(arguments[0]);case 2:return void console.log(arguments[0],arguments[1]);case 3:return void console.log(arguments[0],arguments[1],arguments[2]);case 4:return void console.log(arguments[0],arguments[1],arguments[2],arguments[3]);default:console.log(arguments);}},STPH_UniqueAT.init=function(){STPH_UniqueAT.log("Unique Action Tag - Initializing",STPH_UniqueAT),$("#field_validation_error_state").val(1),STPH_UniqueAT.params.errors,Object.keys(STPH_UniqueAT.params.actionTags).forEach(function(a){var b=STPH_UniqueAT.params.actionTags[a];Object.values(b).forEach(function(a){if("text"==a.type)for(var b=0;b<a.tagPerFieldCount;b++)a[b]&&(a[b].tag=a.tag,new STPH_UniqueAT.ActionTagClass(a[b]).init())})})},STPH_UniqueAT.ActionTagClass=function(){function a(b){_classCallCheck(this,a),this.atv=b,this.ob=document.getElementsByName(this.atv.field)[0],this.request=STPH_UniqueAT.request,this.requestUrl=STPH_UniqueAT.request.url,this.requestData={tag:this.atv.tag,value:null,field:this.atv.field,targets:this.atv.targets,pid:this.request.pid,record:this.request.record,event_id:this.request.event_id,instance:this.request.instance}}return _createClass(a,[{key:"init",value:function init(){this.writeLabels(),this.atv.error?STPH_UniqueAT.log("["+this.requestData.tag+"]["+this.atv.field+"] Error: "+this.atv.error+".)"):(this.bindOnBlur(),this.bindAfterAjax(),this.ajaxCheckUnique("on-load"))}},{key:"writeLabels",value:function writeLabels(){if(STPH_UniqueAT.params.labels){STPH_UniqueAT.log("["+this.requestData.tag+"]["+this.atv.field+"] Apply actiontag with target(s): "+this.atv.targets+".)");var a=$("#label-"+this.atv.field+" tr").find("td:first");this.error,a.html(a.text()+"<div style=\"font-weight:100;font-size:12px;\">("+this.requestData.tag+")</div>")}}},{key:"bindAfterAjax",value:function bindAfterAjax(){var a=this;if("@UNIQUE-STRICT"==this.requestData.tag){console.log("Add targets for field "+this.requestData.field);var b=this.requestData.targets;for(var e in b)if(b[e]!=this.requestData.field){var c=$("input[name="+this.requestData.field+"]").attr("data-targets"),d=$("input[name="+b[e]+"]").attr("data-targets");c=c?c.split(","):[],d=d?d.split(","):[],c.push(b[e]),d.push(this.requestData.field),$("input[name="+this.requestData.field+"]").attr("data-targets",Array.from(new Set(c))),$("input[name="+b[e]+"]").attr("data-targets",Array.from(new Set(d)))}$("input[name="+this.requestData.field+"]").bind("afterAjaxCheck",function(){STPH_UniqueAT.log("After ajax done for field ."+a.requestData.field),a.onPageCheckUnique()})}}},{key:"onPageCheckOther",value:function onPageCheckOther(a){if("@UNIQUE-STRICT"==this.requestData.tag){a.addClass("loading-unique");var b=[],c=a.attr("data-targets").split(",");c.forEach(function(c){var d=$("input[name="+c+"]").val();$("input[name="+c+"]").removeClass("has-duplicate-warning"),d==a.val()&&""!=d&&""!=a.val&&b.push(c)}),0<b.length?(simpleDialog("Warning: You have entered a duplicate value in field(s)   in conflict to "+a.attr("name")),$("input[name="+a.attr("name")+"]").addClass("has-duplicate-warning"),b.forEach(function(a){$("input[name="+a+"]").addClass("has-duplicate-warning")})):$("input[name="+a.attr("name")+"]").removeClass("has-duplicate-warning"),a.removeClass("loading-unique")}}},{key:"onPageCheckUnique",value:function onPageCheckUnique(){var a=this;if("@UNIQUE-STRICT"==this.requestData.tag){console.log("trigger check on page"),this.toggleUI("start-load");var b=[],c=this.ob.dataset.targets.split(",");c.forEach(function(c){var d=$("input[name="+c+"]").val();$("input[name="+c+"]").removeClass("has-duplicate-warning"),d==a.requestData.value&&""!=d&&""!=a.requestData.value&&b.push(c)}),0<b.length?(this.toggleUI("show-warning",!0,b),$("input[name="+this.requestData.field+"]").addClass("has-duplicate-warning"),b.forEach(function(a){$("input[name="+a+"]").addClass("has-duplicate-warning")})):$("input[name="+this.requestData.field+"]").removeClass("has-duplicate-warning"),console.log(b),this.toggleUI("stop-load")}}},{key:"bindOnBlur",value:function bindOnBlur(){var a=this;STPH_UniqueAT.log("["+this.requestData.tag+"]["+this.atv.field+"] Bind \"onblur\" event."),$("input[name="+this.atv.field+"]").bind("blur",function(){a.ajaxCheckUnique("on-blur")})}},{key:"ajaxCheckUnique",value:function ajaxCheckUnique(a){var b=this;this.requestData.value=trim(this.ob.value),0<this.requestData.value.length?(this.toggleUI("start-load"),$.post(this.requestUrl,{data:this.requestData}).done(function(c){0==c?(b.toggleUI("remove-duplicate"),!("on-load"==a)&&$("input[name="+b.requestData.field+"]").trigger("afterAjaxCheck")):b.toggleUI("show-duplicate","on-blur"==a),b.toggleUI("stop-load")}).fail(function(a){STPH_UniqueAT.log(a),alert(woops),b.toggleUI("stop-load")})):(this.toggleUI("remove-duplicate"),this.onPageCheckUnique())}},{key:"toggleUI",value:function toggleUI(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;switch(a){case"start-load":this.ob.classList.add("loading-unique"),$("#formSaveTip button, #form :input[name=\""+this.atv.field+"\"], #form button").prop("disabled",!0);break;case"stop-load":this.ob.classList.remove("loading-unique"),$("#formSaveTip button, #form :input[name=\""+this.atv.field+"\"], #form button").prop("disabled",!1);break;case"show-duplicate":STPH_UniqueAT.log("Detect duplicate for field "+this.atv.field),this.ob.style.fontWeight="bold",this.ob.style.backgroundColor="#FFB7BE",b&&simpleDialog("The field "+this.atv.field+" is a unique field ("+this.requestData.tag+")"+lang.data_entry_107+" "+lang.data_entry_109+" "+lang.data_entry_110+" "+lang.data_entry_111+" ("+this.ob.value+") "+lang.period+" "+lang.data_entry_108,lang.data_entry_105,"suf_warning_dialog",500,lang.calendar_popup_01);break;case"show-warning":STPH_UniqueAT.log("Warn of duplicate for field "+this.atv.field),b&&simpleDialog("Warning: You have entered a duplicate value in field(s) "+c+"  in conflict to "+this.atv.field);break;case"remove-warning":break;case"remove-duplicate":this.ob.style.fontWeight="normal",this.ob.style.backgroundColor="#FFFFFF";}}}]),a}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy91bmlxdWUuanMiXSwibmFtZXMiOlsiU1RQSF9VbmlxdWVBVCIsImxvZyIsInBhcmFtcyIsImRlYnVnIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY29uc29sZSIsImluaXQiLCIkIiwidmFsIiwiZXJyb3JzIiwiT2JqZWN0Iiwia2V5cyIsImFjdGlvblRhZ3MiLCJmb3JFYWNoIiwiYWN0aW9uVGFnTmFtZSIsImFjdGlvblRhZ3NPYmplY3QiLCJ2YWx1ZXMiLCJmaWVsZEluZm8iLCJ0eXBlIiwiaSIsInRhZ1BlckZpZWxkQ291bnQiLCJ0YWciLCJBY3Rpb25UYWdDbGFzcyIsImFjdGlvblRhZ1ZhbHVlIiwiYXR2Iiwib2IiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlOYW1lIiwiZmllbGQiLCJyZXF1ZXN0IiwicmVxdWVzdFVybCIsInVybCIsInJlcXVlc3REYXRhIiwidmFsdWUiLCJ0YXJnZXRzIiwicGlkIiwicmVjb3JkIiwiZXZlbnRfaWQiLCJpbnN0YW5jZSIsIndyaXRlTGFiZWxzIiwiZXJyb3IiLCJiaW5kT25CbHVyIiwiYmluZEFmdGVyQWpheCIsImFqYXhDaGVja1VuaXF1ZSIsImxhYmVscyIsImxhYmVsIiwiZmluZCIsImh0bWwiLCJ0ZXh0Iiwib2JqIiwicHJvcCIsInRhcmdldHNNYXN0ZXIiLCJhdHRyIiwidGFyZ2V0c1NsYXZlIiwic3BsaXQiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwiYmluZCIsIm9uUGFnZUNoZWNrVW5pcXVlIiwiYWRkQ2xhc3MiLCJkdXBsaWNhdGVWYWx1ZXMiLCJ0YXJnZXQiLCJ0YXJnZXRWYWx1ZSIsInJlbW92ZUNsYXNzIiwic2ltcGxlRGlhbG9nIiwiZHVwbGljYXRlIiwidG9nZ2xlVUkiLCJkYXRhc2V0IiwidHJpZ2dlciIsInRyaW0iLCJwb3N0IiwiZGF0YSIsImRvbmUiLCJyZXNwb25zZSIsImZhaWwiLCJhbGVydCIsIndvb3BzIiwicGhhc2UiLCJkaWFsb2ciLCJkdXBsaWNhdGVzIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3R5bGUiLCJmb250V2VpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwibGFuZyIsImRhdGFfZW50cnlfMTA3IiwiZGF0YV9lbnRyeV8xMDkiLCJkYXRhX2VudHJ5XzExMCIsImRhdGFfZW50cnlfMTExIiwicGVyaW9kIiwiZGF0YV9lbnRyeV8xMDgiLCJkYXRhX2VudHJ5XzEwNSIsImNhbGVuZGFyX3BvcHVwXzAxIl0sIm1hcHBpbmdzIjoiK1lBaUJDLEdBQUlBLENBQUFBLGFBQWEsQ0FBR0EsYUFBYSxFQUFJLEVBQXJDLENBR0FBLGFBQWEsQ0FBQ0MsR0FBZCxDQUFvQixVQUFXLENBQzVCLEdBQUlELGFBQWEsQ0FBQ0UsTUFBZCxDQUFxQkMsS0FBekIsQ0FDSSxPQUFPQyxTQUFTLENBQUNDLE1BQWpCLEVBQ0ksSUFBSyxFQUFMLENBRUksV0FEQUMsQ0FBQUEsT0FBTyxDQUFDTCxHQUFSLENBQVlHLFNBQVMsQ0FBQyxDQUFELENBQXJCLENBQ0EsQ0FDSixJQUFLLEVBQUwsQ0FFSSxXQURBRSxDQUFBQSxPQUFPLENBQUNMLEdBQVIsQ0FBWUcsU0FBUyxDQUFDLENBQUQsQ0FBckIsQ0FBMEJBLFNBQVMsQ0FBQyxDQUFELENBQW5DLENBQ0EsQ0FDSixJQUFLLEVBQUwsQ0FFSSxXQURBRSxDQUFBQSxPQUFPLENBQUNMLEdBQVIsQ0FBWUcsU0FBUyxDQUFDLENBQUQsQ0FBckIsQ0FBMEJBLFNBQVMsQ0FBQyxDQUFELENBQW5DLENBQXdDQSxTQUFTLENBQUMsQ0FBRCxDQUFqRCxDQUNBLENBQ0osSUFBSyxFQUFMLENBRUksV0FEQUUsQ0FBQUEsT0FBTyxDQUFDTCxHQUFSLENBQVlHLFNBQVMsQ0FBQyxDQUFELENBQXJCLENBQTBCQSxTQUFTLENBQUMsQ0FBRCxDQUFuQyxDQUF3Q0EsU0FBUyxDQUFDLENBQUQsQ0FBakQsQ0FBc0RBLFNBQVMsQ0FBQyxDQUFELENBQS9ELENBQ0EsQ0FDSixRQUNJRSxPQUFPLENBQUNMLEdBQVIsQ0FBWUcsU0FBWixDQURK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TUFHSixJQUFLLGtCQUFMLENBQ0ksS0FBS0gsRUFBTCxDQUFRNEQsS0FBUixDQUFjQyxVQUFkLENBQTJCLFFBRC9CLENBRUksS0FBSzdELEVBQUwsQ0FBUTRELEtBQVIsQ0FBY0UsZUFBZCxDQUFnQyxTQUZwQyxDQXRDSixDQTJDSCxDQTlPTCxRIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFVuaXF1ZSBBY3Rpb24gVGFnIC0gQSBSRURDYXAgZXh0ZXJuYWwgbW9kdWxlIHByb3ZpZGluZyBhY3Rpb24gdGFncyB0aGF0IG1ha2UgZmllbGRzIHVuaXF1ZS5cclxuICogQXV0aG9yOiBFa2luIFRlcnRlbWl6XHJcbiAqIFxyXG4gKiBcclxuICogRGV2ZWxvcGVyIE5vdGU6IEJhYmVsIEphdmFzY3JpcHQgY29tcGlsYXRpb25cclxuICogVGhlIG1vZHVsZSBpcyB1c2luZyBhIEJhYmVsIGNvbXBpbGVkIHZlcnNpb24gb2YgdGhpcyBjb2RlIHRvIGVuc3VyZSBtb2Rlcm4gSmF2YXNjcmlwdCBjYW4gYmUgdXNlZCB3aXRob3V0IGxvc2luZyBCcm93c2VyIFN1cHBvcnQuIFxyXG4gKiBSdW4gYG5wbSBydW4gYnVpbGRgIG9yIGBucG0gcnVuIGRldmAgYWZ0ZXIgbWFraW5nIGNvZGUgY2hhbmdlcyB0byB5b3VyIEphdmFjc3JpcHQuXHJcbiAqIEFsc28gZW5zdXJlIHRoYXQgeW91IGhhdmUgTm9kZS5qcyBydW5uaW5nIG9uIHlvdXIgbG9jYWwgZGV2ZWxvcG1lbnQgbWFjaGluZSBcclxuICogYW5kIGhhdmUgaW5zdGFsbGVkIGFsbCBuZWNlc3NhcnkgbG9jYWwgZGVwZW5kZW5jaWVzIHdpdGggYG5wbSBpbnN0YWxsYC5cclxuICogXHJcbiAqIENyZWRpdHM6IFxyXG4gKiAtIEfDvG50aGVyIFJlem5pY3plazsgQSBsb3Qgb2YgdGhpcyBjb2RlIGlzIGJhc2VkIG9uIHRoZSBSRURDYXAgQXV0b2ZpbGwgRXh0ZXJuYWwgTW9kdWxlLiAoaHR0cHM6Ly9naXRodWIuY29tL2dyZXpuaWN6ZWsvcmVkY2FwX2F1dG9maWxsKVxyXG4gKiAtIEFuZHkgTWFydGluOyBUbyBwYXJzZSBBY3Rpb25UYWdzIGZyb20gdGhlIGZpZWxkIGFubm90YXRpb25zIEFjdGlvblRhZ0hlbHBlciBjbGFzcyBpcyB1c2VkLiAoaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTIzYW5keS9kZDI2MjQzOWMwNDc4ZmZiZDM3ZTQ2ODViYzgwMTdhYylcclxuICogXHJcbiAqL1xyXG5cclxuIHZhciBTVFBIX1VuaXF1ZUFUID0gU1RQSF9VbmlxdWVBVCB8fCB7fTtcclxuXHJcbiAvLyBEZWJ1ZyBsb2dnaW5nXHJcbiBTVFBIX1VuaXF1ZUFULmxvZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKFNUUEhfVW5pcXVlQVQucGFyYW1zLmRlYnVnKSB7XHJcbiAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50c1swXSk7IFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBjYXNlIDI6IFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pOyBcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSAzOiBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pOyBcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSwgYXJndW1lbnRzWzNdKTsgXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8vIEluaXRpYWxpemF0aW9uXHJcblNUUEhfVW5pcXVlQVQuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIFNUUEhfVW5pcXVlQVQubG9nKFwiVW5pcXVlIEFjdGlvbiBUYWcgLSBJbml0aWFsaXppbmdcIiwgU1RQSF9VbmlxdWVBVCk7XHJcblxyXG4gICAgLy8gIFRoaXMgaXMgbm90IGNsZWFuLCBidXQgY2Fubm90IG90aGVyd2lzZSBwcmV2ZW50IGZvcm0gc3VibWl0IG9uIGVudGVyLCBpLmUucHJldmVudERlZmF1bHQoKSBvbiBrZXlkb3duIGhhcyBubyBlZmZlY3Qgb24gZm9ybSBzdWJtaXNzaW9uLiBXb3VsZCBiZSBoYXBweSBhYm91dCBhIGZpeCA6KVxyXG4gICAgJCgnI2ZpZWxkX3ZhbGlkYXRpb25fZXJyb3Jfc3RhdGUnKS52YWwoMSlcclxuXHJcbiAgICAvLyBDaGVjayBmb3IgZXJyb3JzXHJcbiAgICBpZiAoU1RQSF9VbmlxdWVBVC5wYXJhbXMuZXJyb3JzKSB7XHJcbiAgICAgICAgLy9zaG93RXJyb3IoU1RQSF9VbmlxdWVBVC5wYXJhbXMudW5pcXVlKTsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIExvb3Agb3ZlciBhbGwgQWN0aW9uIFRhZ3MgYW5kIGluaXRpYXRlIGEgY2xhc3MgZm9yIGVhY2ggZmllbGQgdGhhdCBoYXMgYSB2YWxpZCBBY3Rpb24gVGFnXHJcbiAgICBPYmplY3Qua2V5cyhTVFBIX1VuaXF1ZUFULnBhcmFtcy5hY3Rpb25UYWdzKS5mb3JFYWNoKGZ1bmN0aW9uKGFjdGlvblRhZ05hbWUpe1xyXG4gICAgICAgIHZhciBhY3Rpb25UYWdzT2JqZWN0ID0gU1RQSF9VbmlxdWVBVC5wYXJhbXMuYWN0aW9uVGFnc1thY3Rpb25UYWdOYW1lXTtcclxuICAgICAgICBPYmplY3QudmFsdWVzKGFjdGlvblRhZ3NPYmplY3QpLmZvckVhY2goIChmaWVsZEluZm8pID0+IHtcclxuXHJcbiAgICAgICAgICAgIC8vICBPbmx5IGFjY2VwdCBmaWVsZCB0eXBlIFwidGV4dFwiXHJcbiAgICAgICAgICAgIGlmKGZpZWxkSW5mby50eXBlID09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkSW5mby50YWdQZXJGaWVsZENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRJbmZvW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkSW5mb1tpXVtcInRhZ1wiXSA9IGZpZWxkSW5mby50YWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTVFBIX1VuaXF1ZUFULkFjdGlvblRhZ0NsYXNzKGZpZWxkSW5mb1tpXSkuaW5pdCgpOyAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuU1RQSF9VbmlxdWVBVC5BY3Rpb25UYWdDbGFzcyA9IGNsYXNzIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25UYWdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuYXR2ID0gYWN0aW9uVGFnVmFsdWU7XHJcbiAgICAgICAgdGhpcy5vYiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKHRoaXMuYXR2LmZpZWxkKVswXTtcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSBTVFBIX1VuaXF1ZUFULnJlcXVlc3QsXHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gIFNUUEhfVW5pcXVlQVQucmVxdWVzdC51cmwsXHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSA9IHtcclxuICAgICAgICAgICAgdGFnOiB0aGlzLmF0di50YWcsXHJcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgICAgICBmaWVsZDogdGhpcy5hdHYuZmllbGQsXHJcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuYXR2LnRhcmdldHMsXHJcbiAgICAgICAgICAgIHBpZDogIHRoaXMucmVxdWVzdC5waWQsXHJcbiAgICAgICAgICAgIHJlY29yZDogIHRoaXMucmVxdWVzdC5yZWNvcmQsXHJcbiAgICAgICAgICAgIGV2ZW50X2lkOiAgdGhpcy5yZXF1ZXN0LmV2ZW50X2lkLFxyXG4gICAgICAgICAgICBpbnN0YW5jZTogIHRoaXMucmVxdWVzdC5pbnN0YW5jZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMud3JpdGVMYWJlbHMoKTtcclxuICAgICAgICBpZiggdGhpcy5hdHYuZXJyb3IgKSB7XHJcbiAgICAgICAgICAgIFNUUEhfVW5pcXVlQVQubG9nKCdbJysgdGhpcy5yZXF1ZXN0RGF0YS50YWcgKyddWycgKyB0aGlzLmF0di5maWVsZCArICddIEVycm9yOiAnICsgdGhpcy5hdHYuZXJyb3IgKyAnLiknKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRPbkJsdXIoKTtcclxuICAgICAgICAgICAgdGhpcy5iaW5kQWZ0ZXJBamF4KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWpheENoZWNrVW5pcXVlKCdvbi1sb2FkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICB3cml0ZUxhYmVscygpIHtcclxuICAgICAgICBpZiAoU1RQSF9VbmlxdWVBVC5wYXJhbXMubGFiZWxzKSB7XHJcbiAgICAgICAgICAgIFNUUEhfVW5pcXVlQVQubG9nKCdbJysgdGhpcy5yZXF1ZXN0RGF0YS50YWcgKyddWycgKyB0aGlzLmF0di5maWVsZCArICddIEFwcGx5IGFjdGlvbnRhZyB3aXRoIHRhcmdldChzKTogJyArIHRoaXMuYXR2LnRhcmdldHMgKyAnLiknKTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsID0gJCgnI2xhYmVsLScrdGhpcy5hdHYuZmllbGQrJyB0cicpLmZpbmQoXCJ0ZDpmaXJzdFwiKTtcclxuICAgICAgICAgICAgaWYodGhpcy5lcnJvcikge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYWJlbC5odG1sKGxhYmVsLnRleHQoKSArICc8ZGl2IHN0eWxlPVwiZm9udC13ZWlnaHQ6MTAwO2ZvbnQtc2l6ZToxMnB4O1wiPignK3RoaXMucmVxdWVzdERhdGEudGFnKycpPC9kaXY+JylcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGJpbmRBZnRlckFqYXgoKSB7XHJcbiAgICAgICAgLy8gIE9ubHkgZm9yIEBVTklRVUUtU1RSSUNUIHRhZ3NcclxuICAgICAgICBpZih0aGlzLnJlcXVlc3REYXRhLnRhZyA9PSBcIkBVTklRVUUtU1RSSUNUXCIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBZGQgdGFyZ2V0cyBmb3IgZmllbGQgXCIrdGhpcy5yZXF1ZXN0RGF0YS5maWVsZClcclxuXHJcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzLnJlcXVlc3REYXRhLnRhcmdldHM7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcCBpbiBvYmopIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCBvYmpbcHJvcF0gIT0gdGhpcy5yZXF1ZXN0RGF0YS5maWVsZCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldHNNYXN0ZXIgPSAgJCgnaW5wdXRbbmFtZT0nICsgdGhpcy5yZXF1ZXN0RGF0YS5maWVsZCArICddJykuYXR0cihcImRhdGEtdGFyZ2V0c1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0c1NsYXZlID0gJCgnaW5wdXRbbmFtZT0nICsgb2JqW3Byb3BdICsgJ10nKS5hdHRyKFwiZGF0YS10YXJnZXRzXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAhdGFyZ2V0c01hc3RlciA/IHRhcmdldHNNYXN0ZXIgPSBbXSA6IHRhcmdldHNNYXN0ZXIgPSB0YXJnZXRzTWFzdGVyLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAhdGFyZ2V0c1NsYXZlID8gdGFyZ2V0c1NsYXZlID0gW10gOiB0YXJnZXRzU2xhdmUgPSB0YXJnZXRzU2xhdmUuc3BsaXQoXCIsXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRzTWFzdGVyLnB1c2gob2JqW3Byb3BdKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRzU2xhdmUucHVzaCh0aGlzLnJlcXVlc3REYXRhLmZpZWxkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT0nICsgdGhpcy5yZXF1ZXN0RGF0YS5maWVsZCArICddJykuYXR0cihcImRhdGEtdGFyZ2V0c1wiLCBBcnJheS5mcm9tKG5ldyBTZXQodGFyZ2V0c01hc3RlcikpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT0nICsgb2JqW3Byb3BdICsgJ10nKS5hdHRyKFwiZGF0YS10YXJnZXRzXCIsIEFycmF5LmZyb20obmV3IFNldCh0YXJnZXRzU2xhdmUpKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAkKCdpbnB1dFtuYW1lPScgKyBvYmpbcHJvcF0gKyAnXScpLmJpbmQoJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5vblBhZ2VDaGVja090aGVyKCAkKCdpbnB1dFtuYW1lPScgKyBvYmpbcHJvcF0gKyAnXScpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT0nICsgdGhpcy5yZXF1ZXN0RGF0YS5maWVsZCArICddJykuYmluZCgnYWZ0ZXJBamF4Q2hlY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBTVFBIX1VuaXF1ZUFULmxvZyhcIkFmdGVyIGFqYXggZG9uZSBmb3IgZmllbGQgLlwiKyB0aGlzLnJlcXVlc3REYXRhLmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25QYWdlQ2hlY2tVbmlxdWUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uUGFnZUNoZWNrT3RoZXIob2IpIHtcclxuICAgICAgICBpZih0aGlzLnJlcXVlc3REYXRhLnRhZyA9PSBcIkBVTklRVUUtU1RSSUNUXCIpIHtcclxuICAgICAgICAgICAgb2IuYWRkQ2xhc3MoJ2xvYWRpbmctdW5pcXVlJyk7XHJcbiAgICAgICAgICAgIHZhciBkdXBsaWNhdGVWYWx1ZXMgPSBbXTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBvYi5hdHRyKFwiZGF0YS10YXJnZXRzXCIpLnNwbGl0KFwiLFwiKTtcclxuXHJcbiAgICAgICAgICAgIHRhcmdldHMuZm9yRWFjaCggKHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFZhbHVlID0gJCgnaW5wdXRbbmFtZT0nICsgdGFyZ2V0ICsgJ10nKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9JyArIHRhcmdldCArICddJykucmVtb3ZlQ2xhc3MoXCJoYXMtZHVwbGljYXRlLXdhcm5pbmdcIilcclxuICAgICAgICAgICAgICAgIGlmKHRhcmdldFZhbHVlID09IG9iLnZhbCgpICYmIHRhcmdldFZhbHVlIT0gXCJcIiAmJiBvYi52YWwgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGR1cGxpY2F0ZVZhbHVlcy5wdXNoKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBpZihkdXBsaWNhdGVWYWx1ZXMubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHNpbXBsZURpYWxvZygnV2FybmluZzogWW91IGhhdmUgZW50ZXJlZCBhIGR1cGxpY2F0ZSB2YWx1ZSBpbiBmaWVsZChzKSAnKyBkdXBsaWNhdGVWYWx1ZXMgKycgIGluIGNvbmZsaWN0IHRvICcgKyBvYi5hdHRyKFwibmFtZVwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT0nICsgb2IuYXR0cihcIm5hbWVcIikgKyAnXScpLmFkZENsYXNzKFwiaGFzLWR1cGxpY2F0ZS13YXJuaW5nXCIpOyAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgZHVwbGljYXRlVmFsdWVzLmZvckVhY2goKGR1cGxpY2F0ZSk9PntcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lPScgKyBkdXBsaWNhdGUgKyAnXScpLmFkZENsYXNzKFwiaGFzLWR1cGxpY2F0ZS13YXJuaW5nXCIpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lPScgKyBvYi5hdHRyKFwibmFtZVwiKSArICddJykucmVtb3ZlQ2xhc3MoXCJoYXMtZHVwbGljYXRlLXdhcm5pbmdcIik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb2IucmVtb3ZlQ2xhc3MoJ2xvYWRpbmctdW5pcXVlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uUGFnZUNoZWNrVW5pcXVlKCkge1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcy5yZXF1ZXN0RGF0YS50YWcgPT0gXCJAVU5JUVVFLVNUUklDVFwiKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRyaWdnZXIgY2hlY2sgb24gcGFnZVwiKVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVVSSgnc3RhcnQtbG9hZCcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgZHVwbGljYXRlVmFsdWVzID0gW107ICAgICAgICAgICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRzID0gdGhpcy5vYi5kYXRhc2V0LnRhcmdldHMuc3BsaXQoXCIsXCIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzLmZvckVhY2goICh0YXJnZXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0VmFsdWUgPSAkKCdpbnB1dFtuYW1lPScgKyB0YXJnZXQgKyAnXScpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9JyArIHRhcmdldCArICddJykucmVtb3ZlQ2xhc3MoXCJoYXMtZHVwbGljYXRlLXdhcm5pbmdcIilcclxuICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXRWYWx1ZSA9PSB0aGlzLnJlcXVlc3REYXRhLnZhbHVlICYmIHRhcmdldFZhbHVlIT0gXCJcIiAmJiB0aGlzLnJlcXVlc3REYXRhLnZhbHVlICE9IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHVwbGljYXRlVmFsdWVzLnB1c2godGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZihkdXBsaWNhdGVWYWx1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVUkoJ3Nob3ctd2FybmluZycsIHRydWUsIGR1cGxpY2F0ZVZhbHVlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT0nICsgdGhpcy5yZXF1ZXN0RGF0YS5maWVsZCArICddJykuYWRkQ2xhc3MoXCJoYXMtZHVwbGljYXRlLXdhcm5pbmdcIik7ICAgICAgICAgICAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGR1cGxpY2F0ZVZhbHVlcy5mb3JFYWNoKChkdXBsaWNhdGUpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9JyArIGR1cGxpY2F0ZSArICddJykuYWRkQ2xhc3MoXCJoYXMtZHVwbGljYXRlLXdhcm5pbmdcIik7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdpbnB1dFtuYW1lPScgKyB0aGlzLnJlcXVlc3REYXRhLmZpZWxkICsgJ10nKS5yZW1vdmVDbGFzcyhcImhhcy1kdXBsaWNhdGUtd2FybmluZ1wiKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkdXBsaWNhdGVWYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVVJKCdzdG9wLWxvYWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBiaW5kT25CbHVyKCkge1xyXG4gICAgICAgIFNUUEhfVW5pcXVlQVQubG9nKCdbJysgdGhpcy5yZXF1ZXN0RGF0YS50YWcgKyddWycgKyB0aGlzLmF0di5maWVsZCArICddIEJpbmQgXCJvbmJsdXJcIiBldmVudC4nKTsgICAgICAgIFxyXG4gICAgICAgICQoJ2lucHV0W25hbWU9JyArIHRoaXMuYXR2LmZpZWxkICsgJ10nKS5iaW5kKCdibHVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFqYXhDaGVja1VuaXF1ZSgnb24tYmx1cicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFqYXhDaGVja1VuaXF1ZSh0cmlnZ2VyKSB7XHJcbiAgICAgICAgdmFyIGRpYWxvZyA9IHRyaWdnZXIgPT0gJ29uLWJsdXInID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIHZhciBvbkxvYWQgPSB0cmlnZ2VyID09ICdvbi1sb2FkJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3REYXRhLnZhbHVlID0gdHJpbSh0aGlzLm9iLnZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5yZXF1ZXN0RGF0YS52YWx1ZS5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVVJKCdzdGFydC1sb2FkJyk7XHJcblxyXG4gICAgICAgICAgICAkLnBvc3QoIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXJsLCBcclxuICAgICAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5yZXF1ZXN0RGF0YSBcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmRvbmUoKHJlc3BvbnNlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocmVzcG9uc2UgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVUkoJ3Nob3ctZHVwbGljYXRlJywgZGlhbG9nKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVVJKCdyZW1vdmUtZHVwbGljYXRlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFvbkxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT0nICsgdGhpcy5yZXF1ZXN0RGF0YS5maWVsZCArICddJykudHJpZ2dlcihcImFmdGVyQWpheENoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVUkoJ3N0b3AtbG9hZCcpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmFpbCggKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBTVFBIX1VuaXF1ZUFULmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBhbGVydCh3b29wcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVVJKCdzdG9wLWxvYWQnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVVJKCdyZW1vdmUtZHVwbGljYXRlJyk7XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlQ2hlY2tVbmlxdWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlVUkocGhhc2UsIGRpYWxvZyA9IGZhbHNlLCBkdXBsaWNhdGVzID0gbnVsbCl7XHJcbiAgICAgICAgc3dpdGNoKHBoYXNlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0LWxvYWQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vYi5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nLXVuaXF1ZScpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2Zvcm1TYXZlVGlwIGJ1dHRvbiwgI2Zvcm0gOmlucHV0W25hbWU9XCInKyB0aGlzLmF0di5maWVsZCArJ1wiXSwgI2Zvcm0gYnV0dG9uJykucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnc3RvcC1sb2FkJzogXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRpbmctdW5pcXVlJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZm9ybVNhdmVUaXAgYnV0dG9uLCAjZm9ybSA6aW5wdXRbbmFtZT1cIicrIHRoaXMuYXR2LmZpZWxkKydcIl0sICNmb3JtIGJ1dHRvbicpLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ3Nob3ctZHVwbGljYXRlJzogICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBTVFBIX1VuaXF1ZUFULmxvZygnRGV0ZWN0IGR1cGxpY2F0ZSBmb3IgZmllbGQgJyArIHRoaXMuYXR2LmZpZWxkICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vYi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGQjdCRSc7XHJcbiAgICAgICAgICAgICAgICBpZihkaWFsb2cpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZURpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1RoZSBmaWVsZCAnKyB0aGlzLmF0di5maWVsZCArJyBpcyBhIHVuaXF1ZSBmaWVsZCAoJyt0aGlzLnJlcXVlc3REYXRhLnRhZysnKScrbGFuZy5kYXRhX2VudHJ5XzEwNysnICcrbGFuZy5kYXRhX2VudHJ5XzEwOSsnICcrbGFuZy5kYXRhX2VudHJ5XzExMCsnICcgKyBsYW5nLmRhdGFfZW50cnlfMTExKycgKCcgKyB0aGlzLm9iLnZhbHVlICsgJykgJytsYW5nLnBlcmlvZCsnICcrbGFuZy5kYXRhX2VudHJ5XzEwOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZy5kYXRhX2VudHJ5XzEwNSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWZfd2FybmluZ19kaWFsb2cnLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1wiJCgnI2Zvcm0gOmlucHV0W25hbWU9XCIrdGhpcy5hdHYuZmllbGQrXCJdJykuZm9jdXMoKTtcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcuY2FsZW5kYXJfcG9wdXBfMDFcclxuICAgICAgICAgICAgICAgICAgICApOyAgICAgXHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdzaG93LXdhcm5pbmcnOlxyXG4gICAgICAgICAgICAgICAgU1RQSF9VbmlxdWVBVC5sb2coJ1dhcm4gb2YgZHVwbGljYXRlIGZvciBmaWVsZCAnICsgdGhpcy5hdHYuZmllbGQgKTsgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoZGlhbG9nKXtcclxuICAgICAgICAgICAgICAgICAgICBzaW1wbGVEaWFsb2coJ1dhcm5pbmc6IFlvdSBoYXZlIGVudGVyZWQgYSBkdXBsaWNhdGUgdmFsdWUgaW4gZmllbGQocykgJysgZHVwbGljYXRlcyArJyAgaW4gY29uZmxpY3QgdG8gJyArIHRoaXMuYXR2LmZpZWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXdhcm5pbmcnOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLWR1cGxpY2F0ZSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iLnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJztcclxuICAgICAgICAgICAgICAgIHRoaXMub2Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNGRkZGRkYnOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==